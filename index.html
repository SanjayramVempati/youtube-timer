<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Countdown Timer with YouTube Background</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white font-sans flex items-center justify-center min-h-screen relative">
  <!-- YouTube Video Background -->
  <div id="player" class="absolute inset-0 z-0"></div>
  <div class="absolute inset-0 bg-black opacity-50 z-10"></div>

  <!-- Timer Interface -->
  <div class="relative z-20 text-center p-6 bg-gray-800 bg-opacity-0 rounded-lg shadow-lg max-w-md w-full">
<!--     <h1 class="text-3xl font-bold mb-6">Countdown Timer</h1> -->
    <div id="timerDisplay" class="text-5xl font-mono mb-4 cursor-pointer" onclick="setTimer()">00:00</div>
    <div class="flex justify-center space-x-4">
      <button id="startBtn" onclick="startTimer()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Start</button>
      <button id="resetBtn" onclick="resetTimer()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Reset</button>
      <button id="muteBtn" onclick="toggleMute()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Unmute</button>
    </div>
    <input id="timeInput" type="number" min="1" max="60" placeholder="Enter minutes" class="mt-4 p-2 w-full text-black rounded hidden focus:outline-none focus:ring-2 focus:ring-blue-500">
  </div>

  <!-- Audio for Alarm -->
  <audio id="alarmSound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio>

  <script>
    let timer;
    let timeLeft = 0; // Time in seconds
    let isRunning = false;
    let player;
    const timerDisplay = document.getElementById('timerDisplay');
    const timeInput = document.getElementById('timeInput');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const muteBtn = document.getElementById('muteBtn');
    const alarmSound = document.getElementById('alarmSound');

    // YouTube IFrame API
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '100%',
        width: '100%',
        videoId: 'EoIU_JU2bHY', // Replace with desired YouTube video ID
        playerVars: {
          autoplay: 1,
          controls: 0,
          loop: 1,
          playlist: 'EoIU_JU2bHY', // Same video ID for looping
          modestbranding: 1,
          mute: 1 // Start muted to comply with autoplay policies
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerReady(event) {
      event.target.playVideo();
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.ENDED) {
        event.target.playVideo(); // Ensure looping
      }
    }

    function toggleMute() {
      if (player.isMuted()) {
        player.unMute();
        muteBtn.textContent = 'Mute';
      } else {
        player.mute();
        muteBtn.textContent = 'Unmute';
      }
    }

    // Timer Functions
    function setTimer() {
      if (!isRunning) {
        timeInput.classList.remove('hidden');
        timeInput.focus();
        timeInput.addEventListener('change', () => {
          const minutes = parseInt(timeInput.value);
          if (minutes > 0 && minutes <= 60) {
            timeLeft = minutes * 60; // Convert minutes to seconds
            updateDisplay();
          }
          timeInput.classList.add('hidden');
          timeInput.value = '';
        });
      }
    }

    function startTimer() {
      if (timeLeft <= 0 || isRunning) return;
      isRunning = true;
      startBtn.textContent = 'Pause';
      timer = setInterval(() => {
        timeLeft--;
        updateDisplay();
        if (timeLeft <= 0) {
          clearInterval(timer);
          isRunning = false;
          startBtn.textContent = 'Start';
          alarmSound.play();
        }
      }, 1000);
    }

    function resetTimer() {
      clearInterval(timer);
      isRunning = false;
      timeLeft = 0;
      startBtn.textContent = 'Start';
      updateDisplay();
    }

    function updateDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // Load YouTube IFrame API
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  </script>
</body>
</html>
